# 🔐 ChatGPT-security  
**RAG(FAISS + Neo4j) 기반 보안 중심 코드 생성 시스템**

## 📌 프로젝트 개요
본 프로젝트는 대규모 언어 모델(LLM)이 생성하는 코드에서 발생할 수 있는  
**보안 취약점 문제(CWE)**를 완화하기 위해,  
**RAG(Retrieval-Augmented Generation)** 구조를 적용한  
**보안 중심 코드 생성 파이프라인**을 구현한 연구 프로젝트이다.

FAISS 기반 벡터 검색과 Neo4j 그래프 데이터베이스를 결합하여,  
보안적으로 의미 있는 코드 맥락을 검색하고 이를 기반으로  
**안전한 코드를 생성하도록 LLM을 유도**한다.

---

## 🎯 프로젝트 목적
- LLM 코드 생성 과정에서 발생하는 보안 취약점 문제 분석
- CWE 기반 취약 코드 / 안전 코드 데이터셋 활용
- 보안 맥락을 반영한 RAG 구조 설계
- 정적 분석 도구(Semgrep)와 연동 가능한 코드 생성
- 생성 코드의 보안성 정량적 평가

---

## 🧠 시스템 전체 흐름
<img width="531" height="635" alt="image" src="https://github.com/user-attachments/assets/5cdba75a-c0b8-42d0-a6e4-57e31ff95f06" />

## 🛠 사용 기술

### AI / LLM
- OpenAI GPT 계열 모델
- (실험) 보안 중심 LLM(SafeCoder) 파인튜닝

### 검색 및 저장소
- **FAISS**: 코드 임베딩 기반 벡터 검색
- **Neo4j**: 코드–취약점–프롬프트 관계 그래프 DB

### 정적 분석
- **Semgrep**: CWE 기반 보안 취약점 분석

### 개발 환경
- Python
- Jupyter Notebook
- JSON 데이터셋

---

## 📂 데이터셋 설명
- **LLMVulGen_3127.json**
- 총 3,127개의 코드 샘플
- CWE 기반 취약 코드와 안전 코드 쌍으로 구성
- 프롬프트, 취약 코드, 안전 코드 포함

---

## ⚙️ 주요 구현 내용

### FAISS–Neo4j 연계 구조
- FAISS 검색 결과 ID와 Neo4j 노드 ID를 1:1로 매핑
- 벡터 유사도 검색과 코드 구조 맥락을 동시에 활용

### 언어 일관성 보장
- 프롬프트에서 요청한 언어와
- LLM이 생성한 코드의 언어를 완전히 일치시킴
- Semgrep 분석 실패 문제 해결

### 보안 중심 RAG 프롬프트 설계
- CWE 정보 및 안전 코드 패턴을 포함한 프롬프트 구성
- 단순 예제 나열이 아닌 맥락 기반 코드 생성

---

## 🧪 평가 방식
- 프롬프트별 코드 생성 시간 측정
- Semgrep를 이용한 CWE 취약점 검출 여부 분석
- RAG 적용 전/후 보안성 비교
